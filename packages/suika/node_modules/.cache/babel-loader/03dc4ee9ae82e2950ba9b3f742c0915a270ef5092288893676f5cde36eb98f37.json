{"ast":null,"code":"import debounce from 'lodash.debounce';\nconst STORE_KEY = 'suika-paper';\nexport class AutoSaveGraphs {\n  constructor(editor) {\n    this.editor = editor;\n    this.listener = void 0;\n    this.listener = debounce(() => {\n      this.save();\n    }, 300);\n  }\n  autoSave() {\n    this.editor.commandManager.on('change', this.listener);\n  }\n  stopAutoSave() {\n    this.editor.commandManager.off('change', this.listener);\n  }\n  save() {\n    localStorage.setItem(STORE_KEY, this.editor.sceneGraph.toJSON());\n  }\n  load() {\n    const dataStr = localStorage.getItem(STORE_KEY);\n    if (!dataStr) return null;\n    const data = JSON.parse(dataStr);\n    return data;\n  }\n}","map":{"version":3,"names":["debounce","STORE_KEY","AutoSaveGraphs","constructor","editor","listener","save","autoSave","commandManager","on","stopAutoSave","off","localStorage","setItem","sceneGraph","toJSON","load","dataStr","getItem","data","JSON","parse"],"sources":["/Users/yangdan/zf-workspace/react/suika/packages/suika/src/editor/store/auto-save-graphs.ts"],"sourcesContent":["import debounce from 'lodash.debounce';\nimport { Editor } from '../editor';\nimport { IEditorPaperData } from '../../type';\n\nconst STORE_KEY = 'suika-paper';\n\nexport class AutoSaveGraphs {\n  listener: () => void;\n  constructor(private editor: Editor) {\n    this.listener = debounce(() => {\n      this.save();\n    }, 300);\n  }\n\n  autoSave() {\n    this.editor.commandManager.on('change', this.listener);\n  }\n  stopAutoSave() {\n    this.editor.commandManager.off('change', this.listener);\n  }\n  save() {\n    localStorage.setItem(STORE_KEY, this.editor.sceneGraph.toJSON());\n  }\n  load() {\n    const dataStr = localStorage.getItem(STORE_KEY);\n    if (!dataStr) return null;\n    const data = JSON.parse(dataStr) as IEditorPaperData;\n    return data;\n  }\n}\n"],"mappings":"AAAA,OAAOA,QAAQ,MAAM,iBAAiB;AAItC,MAAMC,SAAS,GAAG,aAAa;AAE/B,OAAO,MAAMC,cAAc,CAAC;EAE1BC,WAAWA,CAASC,MAAc,EAAE;IAAA,KAAhBA,MAAc,GAAdA,MAAc;IAAA,KADlCC,QAAQ;IAEN,IAAI,CAACA,QAAQ,GAAGL,QAAQ,CAAC,MAAM;MAC7B,IAAI,CAACM,IAAI,CAAC,CAAC;IACb,CAAC,EAAE,GAAG,CAAC;EACT;EAEAC,QAAQA,CAAA,EAAG;IACT,IAAI,CAACH,MAAM,CAACI,cAAc,CAACC,EAAE,CAAC,QAAQ,EAAE,IAAI,CAACJ,QAAQ,CAAC;EACxD;EACAK,YAAYA,CAAA,EAAG;IACb,IAAI,CAACN,MAAM,CAACI,cAAc,CAACG,GAAG,CAAC,QAAQ,EAAE,IAAI,CAACN,QAAQ,CAAC;EACzD;EACAC,IAAIA,CAAA,EAAG;IACLM,YAAY,CAACC,OAAO,CAACZ,SAAS,EAAE,IAAI,CAACG,MAAM,CAACU,UAAU,CAACC,MAAM,CAAC,CAAC,CAAC;EAClE;EACAC,IAAIA,CAAA,EAAG;IACL,MAAMC,OAAO,GAAGL,YAAY,CAACM,OAAO,CAACjB,SAAS,CAAC;IAC/C,IAAI,CAACgB,OAAO,EAAE,OAAO,IAAI;IACzB,MAAME,IAAI,GAAGC,IAAI,CAACC,KAAK,CAACJ,OAAO,CAAqB;IACpD,OAAOE,IAAI;EACb;AACF"},"metadata":{},"sourceType":"module","externalDependencies":[]}