{"ast":null,"code":"import { useMemo, useRef } from 'react';\nimport { isFunction } from '../utils';\nimport useMemoizedFn from '../useMemoizedFn';\nimport useUpdate from '../useUpdate';\nfunction useControllableValue(props = {}, options = {}) {\n  const {\n    defaultValue,\n    defaultValuePropName = 'defaultValue',\n    valuePropName = 'value',\n    trigger = 'onChange'\n  } = options;\n  const value = props[valuePropName];\n  const isControlled = props.hasOwnProperty(valuePropName);\n  const initialValue = useMemo(() => {\n    if (isControlled) {\n      return value;\n    }\n    if (props.hasOwnProperty(defaultValuePropName)) {\n      return props[defaultValuePropName];\n    }\n    return defaultValue;\n  }, []);\n  const stateRef = useRef(initialValue);\n  if (isControlled) {\n    stateRef.current = value;\n  }\n  const update = useUpdate();\n  function setState(v, ...args) {\n    const r = isFunction(v) ? v(stateRef.current) : v;\n    if (!isControlled) {\n      stateRef.current = r;\n      update();\n    }\n    if (props[trigger]) {\n      props[trigger](r, ...args);\n    }\n  }\n  return [stateRef.current, useMemoizedFn(setState)];\n}\nexport default useControllableValue;","map":{"version":3,"names":["useMemo","useRef","isFunction","useMemoizedFn","useUpdate","useControllableValue","props","options","defaultValue","defaultValuePropName","valuePropName","trigger","value","isControlled","hasOwnProperty","initialValue","stateRef","current","update","setState","v","args","r"],"sources":["/Users/yangdan/zf-workspace/react/suika/node_modules/.pnpm/registry.npmmirror.com+ahooks@3.7.4_react@18.2.0/node_modules/ahooks/es/useControllableValue/index.js"],"sourcesContent":["import { useMemo, useRef } from 'react';\nimport { isFunction } from '../utils';\nimport useMemoizedFn from '../useMemoizedFn';\nimport useUpdate from '../useUpdate';\nfunction useControllableValue(props = {}, options = {}) {\n  const {\n    defaultValue,\n    defaultValuePropName = 'defaultValue',\n    valuePropName = 'value',\n    trigger = 'onChange'\n  } = options;\n  const value = props[valuePropName];\n  const isControlled = props.hasOwnProperty(valuePropName);\n  const initialValue = useMemo(() => {\n    if (isControlled) {\n      return value;\n    }\n    if (props.hasOwnProperty(defaultValuePropName)) {\n      return props[defaultValuePropName];\n    }\n    return defaultValue;\n  }, []);\n  const stateRef = useRef(initialValue);\n  if (isControlled) {\n    stateRef.current = value;\n  }\n  const update = useUpdate();\n  function setState(v, ...args) {\n    const r = isFunction(v) ? v(stateRef.current) : v;\n    if (!isControlled) {\n      stateRef.current = r;\n      update();\n    }\n    if (props[trigger]) {\n      props[trigger](r, ...args);\n    }\n  }\n  return [stateRef.current, useMemoizedFn(setState)];\n}\nexport default useControllableValue;"],"mappings":"AAAA,SAASA,OAAO,EAAEC,MAAM,QAAQ,OAAO;AACvC,SAASC,UAAU,QAAQ,UAAU;AACrC,OAAOC,aAAa,MAAM,kBAAkB;AAC5C,OAAOC,SAAS,MAAM,cAAc;AACpC,SAASC,oBAAoBA,CAACC,KAAK,GAAG,CAAC,CAAC,EAAEC,OAAO,GAAG,CAAC,CAAC,EAAE;EACtD,MAAM;IACJC,YAAY;IACZC,oBAAoB,GAAG,cAAc;IACrCC,aAAa,GAAG,OAAO;IACvBC,OAAO,GAAG;EACZ,CAAC,GAAGJ,OAAO;EACX,MAAMK,KAAK,GAAGN,KAAK,CAACI,aAAa,CAAC;EAClC,MAAMG,YAAY,GAAGP,KAAK,CAACQ,cAAc,CAACJ,aAAa,CAAC;EACxD,MAAMK,YAAY,GAAGf,OAAO,CAAC,MAAM;IACjC,IAAIa,YAAY,EAAE;MAChB,OAAOD,KAAK;IACd;IACA,IAAIN,KAAK,CAACQ,cAAc,CAACL,oBAAoB,CAAC,EAAE;MAC9C,OAAOH,KAAK,CAACG,oBAAoB,CAAC;IACpC;IACA,OAAOD,YAAY;EACrB,CAAC,EAAE,EAAE,CAAC;EACN,MAAMQ,QAAQ,GAAGf,MAAM,CAACc,YAAY,CAAC;EACrC,IAAIF,YAAY,EAAE;IAChBG,QAAQ,CAACC,OAAO,GAAGL,KAAK;EAC1B;EACA,MAAMM,MAAM,GAAGd,SAAS,CAAC,CAAC;EAC1B,SAASe,QAAQA,CAACC,CAAC,EAAE,GAAGC,IAAI,EAAE;IAC5B,MAAMC,CAAC,GAAGpB,UAAU,CAACkB,CAAC,CAAC,GAAGA,CAAC,CAACJ,QAAQ,CAACC,OAAO,CAAC,GAAGG,CAAC;IACjD,IAAI,CAACP,YAAY,EAAE;MACjBG,QAAQ,CAACC,OAAO,GAAGK,CAAC;MACpBJ,MAAM,CAAC,CAAC;IACV;IACA,IAAIZ,KAAK,CAACK,OAAO,CAAC,EAAE;MAClBL,KAAK,CAACK,OAAO,CAAC,CAACW,CAAC,EAAE,GAAGD,IAAI,CAAC;IAC5B;EACF;EACA,OAAO,CAACL,QAAQ,CAACC,OAAO,EAAEd,aAAa,CAACgB,QAAQ,CAAC,CAAC;AACpD;AACA,eAAed,oBAAoB"},"metadata":{},"sourceType":"module","externalDependencies":[]}