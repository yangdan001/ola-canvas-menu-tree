{"ast":null,"code":"import { __assign } from \"tslib\";\nimport { filterProps } from './utils';\nimport { FormatError, ErrorCode } from 'intl-messageformat';\nimport { IntlError, IntlErrorCode } from './error';\nvar LIST_FORMAT_OPTIONS = ['type', 'style'];\nvar now = Date.now();\nfunction generateToken(i) {\n  return \"\".concat(now, \"_\").concat(i, \"_\").concat(now);\n}\nexport function formatList(opts, getListFormat, values, options) {\n  if (options === void 0) {\n    options = {};\n  }\n  var results = formatListToParts(opts, getListFormat, values, options).reduce(function (all, el) {\n    var val = el.value;\n    if (typeof val !== 'string') {\n      all.push(val);\n    } else if (typeof all[all.length - 1] === 'string') {\n      all[all.length - 1] += val;\n    } else {\n      all.push(val);\n    }\n    return all;\n  }, []);\n  return results.length === 1 ? results[0] : results.length === 0 ? '' : results;\n}\nexport function formatListToParts(_a, getListFormat, values, options) {\n  var locale = _a.locale,\n    onError = _a.onError;\n  if (options === void 0) {\n    options = {};\n  }\n  var ListFormat = Intl.ListFormat;\n  if (!ListFormat) {\n    onError(new FormatError(\"Intl.ListFormat is not available in this environment.\\nTry polyfilling it using \\\"@formatjs/intl-listformat\\\"\\n\", ErrorCode.MISSING_INTL_API));\n  }\n  var filteredOptions = filterProps(options, LIST_FORMAT_OPTIONS);\n  try {\n    var richValues_1 = {};\n    var serializedValues = values.map(function (v, i) {\n      if (typeof v === 'object') {\n        var id = generateToken(i);\n        richValues_1[id] = v;\n        return id;\n      }\n      return String(v);\n    });\n    return getListFormat(locale, filteredOptions).formatToParts(serializedValues).map(function (part) {\n      return part.type === 'literal' ? part : __assign(__assign({}, part), {\n        value: richValues_1[part.value] || part.value\n      });\n    });\n  } catch (e) {\n    onError(new IntlError(IntlErrorCode.FORMAT_ERROR, 'Error formatting list.', e));\n  }\n  // @ts-ignore\n  return values;\n}","map":{"version":3,"names":["__assign","filterProps","FormatError","ErrorCode","IntlError","IntlErrorCode","LIST_FORMAT_OPTIONS","now","Date","generateToken","i","concat","formatList","opts","getListFormat","values","options","results","formatListToParts","reduce","all","el","val","value","push","length","_a","locale","onError","ListFormat","Intl","MISSING_INTL_API","filteredOptions","richValues_1","serializedValues","map","v","id","String","formatToParts","part","type","e","FORMAT_ERROR"],"sources":["/Users/yangdan/zf-workspace/react/suika/node_modules/.pnpm/registry.npmmirror.com+@formatjs+intl@2.6.9_typescript@4.9.5/node_modules/@formatjs/intl/lib/src/list.js"],"sourcesContent":["import { __assign } from \"tslib\";\nimport { filterProps } from './utils';\nimport { FormatError, ErrorCode } from 'intl-messageformat';\nimport { IntlError, IntlErrorCode } from './error';\nvar LIST_FORMAT_OPTIONS = [\n    'type',\n    'style',\n];\nvar now = Date.now();\nfunction generateToken(i) {\n    return \"\".concat(now, \"_\").concat(i, \"_\").concat(now);\n}\nexport function formatList(opts, getListFormat, values, options) {\n    if (options === void 0) { options = {}; }\n    var results = formatListToParts(opts, getListFormat, values, options).reduce(function (all, el) {\n        var val = el.value;\n        if (typeof val !== 'string') {\n            all.push(val);\n        }\n        else if (typeof all[all.length - 1] === 'string') {\n            all[all.length - 1] += val;\n        }\n        else {\n            all.push(val);\n        }\n        return all;\n    }, []);\n    return results.length === 1 ? results[0] : results.length === 0 ? '' : results;\n}\nexport function formatListToParts(_a, getListFormat, values, options) {\n    var locale = _a.locale, onError = _a.onError;\n    if (options === void 0) { options = {}; }\n    var ListFormat = Intl.ListFormat;\n    if (!ListFormat) {\n        onError(new FormatError(\"Intl.ListFormat is not available in this environment.\\nTry polyfilling it using \\\"@formatjs/intl-listformat\\\"\\n\", ErrorCode.MISSING_INTL_API));\n    }\n    var filteredOptions = filterProps(options, LIST_FORMAT_OPTIONS);\n    try {\n        var richValues_1 = {};\n        var serializedValues = values.map(function (v, i) {\n            if (typeof v === 'object') {\n                var id = generateToken(i);\n                richValues_1[id] = v;\n                return id;\n            }\n            return String(v);\n        });\n        return getListFormat(locale, filteredOptions)\n            .formatToParts(serializedValues)\n            .map(function (part) {\n            return part.type === 'literal'\n                ? part\n                : __assign(__assign({}, part), { value: richValues_1[part.value] || part.value });\n        });\n    }\n    catch (e) {\n        onError(new IntlError(IntlErrorCode.FORMAT_ERROR, 'Error formatting list.', e));\n    }\n    // @ts-ignore\n    return values;\n}\n"],"mappings":"AAAA,SAASA,QAAQ,QAAQ,OAAO;AAChC,SAASC,WAAW,QAAQ,SAAS;AACrC,SAASC,WAAW,EAAEC,SAAS,QAAQ,oBAAoB;AAC3D,SAASC,SAAS,EAAEC,aAAa,QAAQ,SAAS;AAClD,IAAIC,mBAAmB,GAAG,CACtB,MAAM,EACN,OAAO,CACV;AACD,IAAIC,GAAG,GAAGC,IAAI,CAACD,GAAG,CAAC,CAAC;AACpB,SAASE,aAAaA,CAACC,CAAC,EAAE;EACtB,OAAO,EAAE,CAACC,MAAM,CAACJ,GAAG,EAAE,GAAG,CAAC,CAACI,MAAM,CAACD,CAAC,EAAE,GAAG,CAAC,CAACC,MAAM,CAACJ,GAAG,CAAC;AACzD;AACA,OAAO,SAASK,UAAUA,CAACC,IAAI,EAAEC,aAAa,EAAEC,MAAM,EAAEC,OAAO,EAAE;EAC7D,IAAIA,OAAO,KAAK,KAAK,CAAC,EAAE;IAAEA,OAAO,GAAG,CAAC,CAAC;EAAE;EACxC,IAAIC,OAAO,GAAGC,iBAAiB,CAACL,IAAI,EAAEC,aAAa,EAAEC,MAAM,EAAEC,OAAO,CAAC,CAACG,MAAM,CAAC,UAAUC,GAAG,EAAEC,EAAE,EAAE;IAC5F,IAAIC,GAAG,GAAGD,EAAE,CAACE,KAAK;IAClB,IAAI,OAAOD,GAAG,KAAK,QAAQ,EAAE;MACzBF,GAAG,CAACI,IAAI,CAACF,GAAG,CAAC;IACjB,CAAC,MACI,IAAI,OAAOF,GAAG,CAACA,GAAG,CAACK,MAAM,GAAG,CAAC,CAAC,KAAK,QAAQ,EAAE;MAC9CL,GAAG,CAACA,GAAG,CAACK,MAAM,GAAG,CAAC,CAAC,IAAIH,GAAG;IAC9B,CAAC,MACI;MACDF,GAAG,CAACI,IAAI,CAACF,GAAG,CAAC;IACjB;IACA,OAAOF,GAAG;EACd,CAAC,EAAE,EAAE,CAAC;EACN,OAAOH,OAAO,CAACQ,MAAM,KAAK,CAAC,GAAGR,OAAO,CAAC,CAAC,CAAC,GAAGA,OAAO,CAACQ,MAAM,KAAK,CAAC,GAAG,EAAE,GAAGR,OAAO;AAClF;AACA,OAAO,SAASC,iBAAiBA,CAACQ,EAAE,EAAEZ,aAAa,EAAEC,MAAM,EAAEC,OAAO,EAAE;EAClE,IAAIW,MAAM,GAAGD,EAAE,CAACC,MAAM;IAAEC,OAAO,GAAGF,EAAE,CAACE,OAAO;EAC5C,IAAIZ,OAAO,KAAK,KAAK,CAAC,EAAE;IAAEA,OAAO,GAAG,CAAC,CAAC;EAAE;EACxC,IAAIa,UAAU,GAAGC,IAAI,CAACD,UAAU;EAChC,IAAI,CAACA,UAAU,EAAE;IACbD,OAAO,CAAC,IAAI1B,WAAW,CAAC,iHAAiH,EAAEC,SAAS,CAAC4B,gBAAgB,CAAC,CAAC;EAC3K;EACA,IAAIC,eAAe,GAAG/B,WAAW,CAACe,OAAO,EAAEV,mBAAmB,CAAC;EAC/D,IAAI;IACA,IAAI2B,YAAY,GAAG,CAAC,CAAC;IACrB,IAAIC,gBAAgB,GAAGnB,MAAM,CAACoB,GAAG,CAAC,UAAUC,CAAC,EAAE1B,CAAC,EAAE;MAC9C,IAAI,OAAO0B,CAAC,KAAK,QAAQ,EAAE;QACvB,IAAIC,EAAE,GAAG5B,aAAa,CAACC,CAAC,CAAC;QACzBuB,YAAY,CAACI,EAAE,CAAC,GAAGD,CAAC;QACpB,OAAOC,EAAE;MACb;MACA,OAAOC,MAAM,CAACF,CAAC,CAAC;IACpB,CAAC,CAAC;IACF,OAAOtB,aAAa,CAACa,MAAM,EAAEK,eAAe,CAAC,CACxCO,aAAa,CAACL,gBAAgB,CAAC,CAC/BC,GAAG,CAAC,UAAUK,IAAI,EAAE;MACrB,OAAOA,IAAI,CAACC,IAAI,KAAK,SAAS,GACxBD,IAAI,GACJxC,QAAQ,CAACA,QAAQ,CAAC,CAAC,CAAC,EAAEwC,IAAI,CAAC,EAAE;QAAEjB,KAAK,EAAEU,YAAY,CAACO,IAAI,CAACjB,KAAK,CAAC,IAAIiB,IAAI,CAACjB;MAAM,CAAC,CAAC;IACzF,CAAC,CAAC;EACN,CAAC,CACD,OAAOmB,CAAC,EAAE;IACNd,OAAO,CAAC,IAAIxB,SAAS,CAACC,aAAa,CAACsC,YAAY,EAAE,wBAAwB,EAAED,CAAC,CAAC,CAAC;EACnF;EACA;EACA,OAAO3B,MAAM;AACjB"},"metadata":{},"sourceType":"module","externalDependencies":[]}