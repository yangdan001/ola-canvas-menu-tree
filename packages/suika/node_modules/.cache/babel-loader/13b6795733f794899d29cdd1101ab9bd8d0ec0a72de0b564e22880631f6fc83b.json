{"ast":null,"code":"import { useRef, useEffect } from 'react';\nexport class EventEmitter {\n  constructor() {\n    this.subscriptions = new Set();\n    this.emit = val => {\n      for (const subscription of this.subscriptions) {\n        subscription(val);\n      }\n    };\n    this.useSubscription = callback => {\n      // eslint-disable-next-line react-hooks/rules-of-hooks\n      const callbackRef = useRef();\n      callbackRef.current = callback;\n      // eslint-disable-next-line react-hooks/rules-of-hooks\n      useEffect(() => {\n        function subscription(val) {\n          if (callbackRef.current) {\n            callbackRef.current(val);\n          }\n        }\n        this.subscriptions.add(subscription);\n        return () => {\n          this.subscriptions.delete(subscription);\n        };\n      }, []);\n    };\n  }\n}\nexport default function useEventEmitter() {\n  const ref = useRef();\n  if (!ref.current) {\n    ref.current = new EventEmitter();\n  }\n  return ref.current;\n}","map":{"version":3,"names":["useRef","useEffect","EventEmitter","constructor","subscriptions","Set","emit","val","subscription","useSubscription","callback","callbackRef","current","add","delete","useEventEmitter","ref"],"sources":["/Users/yangdan/zf-workspace/react/suika/node_modules/.pnpm/registry.npmmirror.com+ahooks@3.7.4_react@18.2.0/node_modules/ahooks/es/useEventEmitter/index.js"],"sourcesContent":["import { useRef, useEffect } from 'react';\nexport class EventEmitter {\n  constructor() {\n    this.subscriptions = new Set();\n    this.emit = val => {\n      for (const subscription of this.subscriptions) {\n        subscription(val);\n      }\n    };\n    this.useSubscription = callback => {\n      // eslint-disable-next-line react-hooks/rules-of-hooks\n      const callbackRef = useRef();\n      callbackRef.current = callback;\n      // eslint-disable-next-line react-hooks/rules-of-hooks\n      useEffect(() => {\n        function subscription(val) {\n          if (callbackRef.current) {\n            callbackRef.current(val);\n          }\n        }\n        this.subscriptions.add(subscription);\n        return () => {\n          this.subscriptions.delete(subscription);\n        };\n      }, []);\n    };\n  }\n}\nexport default function useEventEmitter() {\n  const ref = useRef();\n  if (!ref.current) {\n    ref.current = new EventEmitter();\n  }\n  return ref.current;\n}"],"mappings":"AAAA,SAASA,MAAM,EAAEC,SAAS,QAAQ,OAAO;AACzC,OAAO,MAAMC,YAAY,CAAC;EACxBC,WAAWA,CAAA,EAAG;IACZ,IAAI,CAACC,aAAa,GAAG,IAAIC,GAAG,CAAC,CAAC;IAC9B,IAAI,CAACC,IAAI,GAAGC,GAAG,IAAI;MACjB,KAAK,MAAMC,YAAY,IAAI,IAAI,CAACJ,aAAa,EAAE;QAC7CI,YAAY,CAACD,GAAG,CAAC;MACnB;IACF,CAAC;IACD,IAAI,CAACE,eAAe,GAAGC,QAAQ,IAAI;MACjC;MACA,MAAMC,WAAW,GAAGX,MAAM,CAAC,CAAC;MAC5BW,WAAW,CAACC,OAAO,GAAGF,QAAQ;MAC9B;MACAT,SAAS,CAAC,MAAM;QACd,SAASO,YAAYA,CAACD,GAAG,EAAE;UACzB,IAAII,WAAW,CAACC,OAAO,EAAE;YACvBD,WAAW,CAACC,OAAO,CAACL,GAAG,CAAC;UAC1B;QACF;QACA,IAAI,CAACH,aAAa,CAACS,GAAG,CAACL,YAAY,CAAC;QACpC,OAAO,MAAM;UACX,IAAI,CAACJ,aAAa,CAACU,MAAM,CAACN,YAAY,CAAC;QACzC,CAAC;MACH,CAAC,EAAE,EAAE,CAAC;IACR,CAAC;EACH;AACF;AACA,eAAe,SAASO,eAAeA,CAAA,EAAG;EACxC,MAAMC,GAAG,GAAGhB,MAAM,CAAC,CAAC;EACpB,IAAI,CAACgB,GAAG,CAACJ,OAAO,EAAE;IAChBI,GAAG,CAACJ,OAAO,GAAG,IAAIV,YAAY,CAAC,CAAC;EAClC;EACA,OAAOc,GAAG,CAACJ,OAAO;AACpB"},"metadata":{},"sourceType":"module","externalDependencies":[]}