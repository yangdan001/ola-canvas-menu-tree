{"ast":null,"code":"import { useEffect, useRef } from 'react';\nconst diffTwoDeps = (deps1, deps2) => {\n  //Let's do a reference equality check on 2 dependency list.\n  //If deps1 is defined, we iterate over deps1 and do comparison on each element with equivalent element from deps2\n  //As this func is used only in this hook, we assume 2 deps always have same length.\n  return deps1 ? deps1.map((_ele, idx) => !Object.is(deps1[idx], deps2 === null || deps2 === void 0 ? void 0 : deps2[idx]) ? idx : -1).filter(ele => ele >= 0) : deps2 ? deps2.map((_ele, idx) => idx) : [];\n};\nconst useTrackedEffect = (effect, deps) => {\n  const previousDepsRef = useRef();\n  useEffect(() => {\n    const changes = diffTwoDeps(previousDepsRef.current, deps);\n    const previousDeps = previousDepsRef.current;\n    previousDepsRef.current = deps;\n    return effect(changes, previousDeps, deps);\n  }, deps);\n};\nexport default useTrackedEffect;","map":{"version":3,"names":["useEffect","useRef","diffTwoDeps","deps1","deps2","map","_ele","idx","Object","is","filter","ele","useTrackedEffect","effect","deps","previousDepsRef","changes","current","previousDeps"],"sources":["/Users/yangdan/zf-workspace/react/suika/node_modules/.pnpm/registry.npmmirror.com+ahooks@3.7.4_react@18.2.0/node_modules/ahooks/es/useTrackedEffect/index.js"],"sourcesContent":["import { useEffect, useRef } from 'react';\nconst diffTwoDeps = (deps1, deps2) => {\n  //Let's do a reference equality check on 2 dependency list.\n  //If deps1 is defined, we iterate over deps1 and do comparison on each element with equivalent element from deps2\n  //As this func is used only in this hook, we assume 2 deps always have same length.\n  return deps1 ? deps1.map((_ele, idx) => !Object.is(deps1[idx], deps2 === null || deps2 === void 0 ? void 0 : deps2[idx]) ? idx : -1).filter(ele => ele >= 0) : deps2 ? deps2.map((_ele, idx) => idx) : [];\n};\nconst useTrackedEffect = (effect, deps) => {\n  const previousDepsRef = useRef();\n  useEffect(() => {\n    const changes = diffTwoDeps(previousDepsRef.current, deps);\n    const previousDeps = previousDepsRef.current;\n    previousDepsRef.current = deps;\n    return effect(changes, previousDeps, deps);\n  }, deps);\n};\nexport default useTrackedEffect;"],"mappings":"AAAA,SAASA,SAAS,EAAEC,MAAM,QAAQ,OAAO;AACzC,MAAMC,WAAW,GAAGA,CAACC,KAAK,EAAEC,KAAK,KAAK;EACpC;EACA;EACA;EACA,OAAOD,KAAK,GAAGA,KAAK,CAACE,GAAG,CAAC,CAACC,IAAI,EAAEC,GAAG,KAAK,CAACC,MAAM,CAACC,EAAE,CAACN,KAAK,CAACI,GAAG,CAAC,EAAEH,KAAK,KAAK,IAAI,IAAIA,KAAK,KAAK,KAAK,CAAC,GAAG,KAAK,CAAC,GAAGA,KAAK,CAACG,GAAG,CAAC,CAAC,GAAGA,GAAG,GAAG,CAAC,CAAC,CAAC,CAACG,MAAM,CAACC,GAAG,IAAIA,GAAG,IAAI,CAAC,CAAC,GAAGP,KAAK,GAAGA,KAAK,CAACC,GAAG,CAAC,CAACC,IAAI,EAAEC,GAAG,KAAKA,GAAG,CAAC,GAAG,EAAE;AAC3M,CAAC;AACD,MAAMK,gBAAgB,GAAGA,CAACC,MAAM,EAAEC,IAAI,KAAK;EACzC,MAAMC,eAAe,GAAGd,MAAM,CAAC,CAAC;EAChCD,SAAS,CAAC,MAAM;IACd,MAAMgB,OAAO,GAAGd,WAAW,CAACa,eAAe,CAACE,OAAO,EAAEH,IAAI,CAAC;IAC1D,MAAMI,YAAY,GAAGH,eAAe,CAACE,OAAO;IAC5CF,eAAe,CAACE,OAAO,GAAGH,IAAI;IAC9B,OAAOD,MAAM,CAACG,OAAO,EAAEE,YAAY,EAAEJ,IAAI,CAAC;EAC5C,CAAC,EAAEA,IAAI,CAAC;AACV,CAAC;AACD,eAAeF,gBAAgB"},"metadata":{},"sourceType":"module","externalDependencies":[]}