{"ast":null,"code":"var _jsxFileName = \"/Users/yangdan/zf-workspace/react/suika/packages/suika/src/components/ColorPicker/ImagePicker/ImagePicker.tsx\",\n  _s = $RefreshSig$();\nimport { useMount } from 'ahooks';\nimport { useRef } from 'react';\nimport './ImagePicker.scss';\nimport { DEFAULT_IMAGE_SRC } from '../../../editor/texture';\nimport { FormattedMessage } from 'react-intl';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const ImagePicker = ({\n  value,\n  onChange\n}) => {\n  _s();\n  const fileInputRef = useRef(null);\n  useMount(() => {\n    const fileInput = document.createElement('input');\n    fileInput.type = 'file';\n    fileInput.accept = 'image/*'; // only image\n\n    fileInput.onchange = e => {\n      var _files;\n      const file = (_files = e.target.files) === null || _files === void 0 ? void 0 : _files[0];\n      if (!file) return;\n      const reader = new FileReader();\n      reader.onload = e => {\n        var _e$target;\n        const src = (_e$target = e.target) === null || _e$target === void 0 ? void 0 : _e$target.result;\n        setTimeout(() => {\n          onChange(src);\n        });\n      };\n      reader.readAsDataURL(file);\n    };\n    fileInputRef.current = fileInput;\n  });\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"suika-image-picker\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"suika-img-content\",\n      children: [/*#__PURE__*/_jsxDEV(\"img\", {\n        className: \"suika-img-preview\",\n        src: value || DEFAULT_IMAGE_SRC\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 38,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"suika-img-choose-btn-wrapper\",\n        children: /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"suika-img-choose-btn\",\n          onClick: () => {\n            var _fileInputRef$current;\n            return (_fileInputRef$current = fileInputRef.current) === null || _fileInputRef$current === void 0 ? void 0 : _fileInputRef$current.click();\n          },\n          children: /*#__PURE__*/_jsxDEV(FormattedMessage, {\n            id: \"uploadFile\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 44,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 40,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 39,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 37,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 36,\n    columnNumber: 5\n  }, this);\n};\n_s(ImagePicker, \"Hcpg90UfKxsOaFHFxYCl6O30u+0=\", false, function () {\n  return [useMount];\n});\n_c = ImagePicker;\nvar _c;\n$RefreshReg$(_c, \"ImagePicker\");","map":{"version":3,"names":["useMount","useRef","DEFAULT_IMAGE_SRC","FormattedMessage","jsxDEV","_jsxDEV","ImagePicker","value","onChange","_s","fileInputRef","fileInput","document","createElement","type","accept","onchange","e","_files","file","target","files","reader","FileReader","onload","_e$target","src","result","setTimeout","readAsDataURL","current","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onClick","_fileInputRef$current","click","id","_c","$RefreshReg$"],"sources":["/Users/yangdan/zf-workspace/react/suika/packages/suika/src/components/ColorPicker/ImagePicker/ImagePicker.tsx"],"sourcesContent":["import { useMount } from 'ahooks';\nimport { FC, useRef } from 'react';\nimport './ImagePicker.scss';\nimport { DEFAULT_IMAGE_SRC } from '../../../editor/texture';\nimport { FormattedMessage } from 'react-intl';\n\ninterface IProps {\n  value: string;\n  onChange: (src: string) => void;\n}\nexport const ImagePicker: FC<IProps> = ({ value, onChange }) => {\n  const fileInputRef = useRef<HTMLInputElement | null>(null);\n\n  useMount(() => {\n    const fileInput = document.createElement('input');\n    fileInput.type = 'file';\n    fileInput.accept = 'image/*'; // only image\n\n    fileInput.onchange = (e) => {\n      const file = (e.target as HTMLInputElement).files?.[0];\n      if (!file) return;\n      const reader = new FileReader();\n      reader.onload = (e) => {\n        const src = e.target?.result as string;\n        setTimeout(() => {\n          onChange(src);\n        });\n      };\n      reader.readAsDataURL(file);\n    };\n\n    fileInputRef.current = fileInput;\n  });\n\n  return (\n    <div className=\"suika-image-picker\">\n      <div className=\"suika-img-content\">\n        <img className=\"suika-img-preview\" src={value || DEFAULT_IMAGE_SRC} />\n        <div className=\"suika-img-choose-btn-wrapper\">\n          <button\n            className=\"suika-img-choose-btn\"\n            onClick={() => fileInputRef.current?.click()}\n          >\n            <FormattedMessage id=\"uploadFile\" />\n          </button>\n        </div>\n      </div>\n    </div>\n  );\n};\n"],"mappings":";;AAAA,SAASA,QAAQ,QAAQ,QAAQ;AACjC,SAAaC,MAAM,QAAQ,OAAO;AAClC,OAAO,oBAAoB;AAC3B,SAASC,iBAAiB,QAAQ,yBAAyB;AAC3D,SAASC,gBAAgB,QAAQ,YAAY;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAM9C,OAAO,MAAMC,WAAuB,GAAGA,CAAC;EAAEC,KAAK;EAAEC;AAAS,CAAC,KAAK;EAAAC,EAAA;EAC9D,MAAMC,YAAY,GAAGT,MAAM,CAA0B,IAAI,CAAC;EAE1DD,QAAQ,CAAC,MAAM;IACb,MAAMW,SAAS,GAAGC,QAAQ,CAACC,aAAa,CAAC,OAAO,CAAC;IACjDF,SAAS,CAACG,IAAI,GAAG,MAAM;IACvBH,SAAS,CAACI,MAAM,GAAG,SAAS,CAAC,CAAC;;IAE9BJ,SAAS,CAACK,QAAQ,GAAIC,CAAC,IAAK;MAAA,IAAAC,MAAA;MAC1B,MAAMC,IAAI,IAAAD,MAAA,GAAID,CAAC,CAACG,MAAM,CAAsBC,KAAK,cAAAH,MAAA,uBAApCA,MAAA,CAAuC,CAAC,CAAC;MACtD,IAAI,CAACC,IAAI,EAAE;MACX,MAAMG,MAAM,GAAG,IAAIC,UAAU,CAAC,CAAC;MAC/BD,MAAM,CAACE,MAAM,GAAIP,CAAC,IAAK;QAAA,IAAAQ,SAAA;QACrB,MAAMC,GAAG,IAAAD,SAAA,GAAGR,CAAC,CAACG,MAAM,cAAAK,SAAA,uBAARA,SAAA,CAAUE,MAAgB;QACtCC,UAAU,CAAC,MAAM;UACfpB,QAAQ,CAACkB,GAAG,CAAC;QACf,CAAC,CAAC;MACJ,CAAC;MACDJ,MAAM,CAACO,aAAa,CAACV,IAAI,CAAC;IAC5B,CAAC;IAEDT,YAAY,CAACoB,OAAO,GAAGnB,SAAS;EAClC,CAAC,CAAC;EAEF,oBACEN,OAAA;IAAK0B,SAAS,EAAC,oBAAoB;IAAAC,QAAA,eACjC3B,OAAA;MAAK0B,SAAS,EAAC,mBAAmB;MAAAC,QAAA,gBAChC3B,OAAA;QAAK0B,SAAS,EAAC,mBAAmB;QAACL,GAAG,EAAEnB,KAAK,IAAIL;MAAkB;QAAA+B,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAE,CAAC,eACtE/B,OAAA;QAAK0B,SAAS,EAAC,8BAA8B;QAAAC,QAAA,eAC3C3B,OAAA;UACE0B,SAAS,EAAC,sBAAsB;UAChCM,OAAO,EAAEA,CAAA;YAAA,IAAAC,qBAAA;YAAA,QAAAA,qBAAA,GAAM5B,YAAY,CAACoB,OAAO,cAAAQ,qBAAA,uBAApBA,qBAAA,CAAsBC,KAAK,CAAC,CAAC;UAAA,CAAC;UAAAP,QAAA,eAE7C3B,OAAA,CAACF,gBAAgB;YAACqC,EAAE,EAAC;UAAY;YAAAP,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAE;QAAC;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAC9B;MAAC;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACN,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACH;EAAC;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACH,CAAC;AAEV,CAAC;AAAC3B,EAAA,CAvCWH,WAAuB;EAAA,QAGlCN,QAAQ;AAAA;AAAAyC,EAAA,GAHGnC,WAAuB;AAAA,IAAAmC,EAAA;AAAAC,YAAA,CAAAD,EAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}