{"ast":null,"code":"import useRafState from '../useRafState';\nimport useLatest from '../useLatest';\nimport { getTargetElement } from '../utils/domTarget';\nimport useEffectWithTarget from '../utils/useEffectWithTarget';\nfunction useScroll(target, shouldUpdate = () => true) {\n  const [position, setPosition] = useRafState();\n  const shouldUpdateRef = useLatest(shouldUpdate);\n  useEffectWithTarget(() => {\n    const el = getTargetElement(target, document);\n    if (!el) {\n      return;\n    }\n    const updatePosition = () => {\n      let newPosition;\n      if (el === document) {\n        if (document.scrollingElement) {\n          newPosition = {\n            left: document.scrollingElement.scrollLeft,\n            top: document.scrollingElement.scrollTop\n          };\n        } else {\n          // When in quirks mode, the scrollingElement attribute returns the HTML body element if it exists and is potentially scrollable, otherwise it returns null.\n          // https://developer.mozilla.org/zh-CN/docs/Web/API/Document/scrollingElement\n          // https://stackoverflow.com/questions/28633221/document-body-scrolltop-firefox-returns-0-only-js\n          newPosition = {\n            left: Math.max(window.pageXOffset, document.documentElement.scrollLeft, document.body.scrollLeft),\n            top: Math.max(window.pageYOffset, document.documentElement.scrollTop, document.body.scrollTop)\n          };\n        }\n      } else {\n        newPosition = {\n          left: el.scrollLeft,\n          top: el.scrollTop\n        };\n      }\n      if (shouldUpdateRef.current(newPosition)) {\n        setPosition(newPosition);\n      }\n    };\n    updatePosition();\n    el.addEventListener('scroll', updatePosition);\n    return () => {\n      el.removeEventListener('scroll', updatePosition);\n    };\n  }, [], target);\n  return position;\n}\nexport default useScroll;","map":{"version":3,"names":["useRafState","useLatest","getTargetElement","useEffectWithTarget","useScroll","target","shouldUpdate","position","setPosition","shouldUpdateRef","el","document","updatePosition","newPosition","scrollingElement","left","scrollLeft","top","scrollTop","Math","max","window","pageXOffset","documentElement","body","pageYOffset","current","addEventListener","removeEventListener"],"sources":["/Users/yangdan/zf-workspace/react/suika/node_modules/.pnpm/registry.npmmirror.com+ahooks@3.7.4_react@18.2.0/node_modules/ahooks/es/useScroll/index.js"],"sourcesContent":["import useRafState from '../useRafState';\nimport useLatest from '../useLatest';\nimport { getTargetElement } from '../utils/domTarget';\nimport useEffectWithTarget from '../utils/useEffectWithTarget';\nfunction useScroll(target, shouldUpdate = () => true) {\n  const [position, setPosition] = useRafState();\n  const shouldUpdateRef = useLatest(shouldUpdate);\n  useEffectWithTarget(() => {\n    const el = getTargetElement(target, document);\n    if (!el) {\n      return;\n    }\n    const updatePosition = () => {\n      let newPosition;\n      if (el === document) {\n        if (document.scrollingElement) {\n          newPosition = {\n            left: document.scrollingElement.scrollLeft,\n            top: document.scrollingElement.scrollTop\n          };\n        } else {\n          // When in quirks mode, the scrollingElement attribute returns the HTML body element if it exists and is potentially scrollable, otherwise it returns null.\n          // https://developer.mozilla.org/zh-CN/docs/Web/API/Document/scrollingElement\n          // https://stackoverflow.com/questions/28633221/document-body-scrolltop-firefox-returns-0-only-js\n          newPosition = {\n            left: Math.max(window.pageXOffset, document.documentElement.scrollLeft, document.body.scrollLeft),\n            top: Math.max(window.pageYOffset, document.documentElement.scrollTop, document.body.scrollTop)\n          };\n        }\n      } else {\n        newPosition = {\n          left: el.scrollLeft,\n          top: el.scrollTop\n        };\n      }\n      if (shouldUpdateRef.current(newPosition)) {\n        setPosition(newPosition);\n      }\n    };\n    updatePosition();\n    el.addEventListener('scroll', updatePosition);\n    return () => {\n      el.removeEventListener('scroll', updatePosition);\n    };\n  }, [], target);\n  return position;\n}\nexport default useScroll;"],"mappings":"AAAA,OAAOA,WAAW,MAAM,gBAAgB;AACxC,OAAOC,SAAS,MAAM,cAAc;AACpC,SAASC,gBAAgB,QAAQ,oBAAoB;AACrD,OAAOC,mBAAmB,MAAM,8BAA8B;AAC9D,SAASC,SAASA,CAACC,MAAM,EAAEC,YAAY,GAAGA,CAAA,KAAM,IAAI,EAAE;EACpD,MAAM,CAACC,QAAQ,EAAEC,WAAW,CAAC,GAAGR,WAAW,CAAC,CAAC;EAC7C,MAAMS,eAAe,GAAGR,SAAS,CAACK,YAAY,CAAC;EAC/CH,mBAAmB,CAAC,MAAM;IACxB,MAAMO,EAAE,GAAGR,gBAAgB,CAACG,MAAM,EAAEM,QAAQ,CAAC;IAC7C,IAAI,CAACD,EAAE,EAAE;MACP;IACF;IACA,MAAME,cAAc,GAAGA,CAAA,KAAM;MAC3B,IAAIC,WAAW;MACf,IAAIH,EAAE,KAAKC,QAAQ,EAAE;QACnB,IAAIA,QAAQ,CAACG,gBAAgB,EAAE;UAC7BD,WAAW,GAAG;YACZE,IAAI,EAAEJ,QAAQ,CAACG,gBAAgB,CAACE,UAAU;YAC1CC,GAAG,EAAEN,QAAQ,CAACG,gBAAgB,CAACI;UACjC,CAAC;QACH,CAAC,MAAM;UACL;UACA;UACA;UACAL,WAAW,GAAG;YACZE,IAAI,EAAEI,IAAI,CAACC,GAAG,CAACC,MAAM,CAACC,WAAW,EAAEX,QAAQ,CAACY,eAAe,CAACP,UAAU,EAAEL,QAAQ,CAACa,IAAI,CAACR,UAAU,CAAC;YACjGC,GAAG,EAAEE,IAAI,CAACC,GAAG,CAACC,MAAM,CAACI,WAAW,EAAEd,QAAQ,CAACY,eAAe,CAACL,SAAS,EAAEP,QAAQ,CAACa,IAAI,CAACN,SAAS;UAC/F,CAAC;QACH;MACF,CAAC,MAAM;QACLL,WAAW,GAAG;UACZE,IAAI,EAAEL,EAAE,CAACM,UAAU;UACnBC,GAAG,EAAEP,EAAE,CAACQ;QACV,CAAC;MACH;MACA,IAAIT,eAAe,CAACiB,OAAO,CAACb,WAAW,CAAC,EAAE;QACxCL,WAAW,CAACK,WAAW,CAAC;MAC1B;IACF,CAAC;IACDD,cAAc,CAAC,CAAC;IAChBF,EAAE,CAACiB,gBAAgB,CAAC,QAAQ,EAAEf,cAAc,CAAC;IAC7C,OAAO,MAAM;MACXF,EAAE,CAACkB,mBAAmB,CAAC,QAAQ,EAAEhB,cAAc,CAAC;IAClD,CAAC;EACH,CAAC,EAAE,EAAE,EAAEP,MAAM,CAAC;EACd,OAAOE,QAAQ;AACjB;AACA,eAAeH,SAAS"},"metadata":{},"sourceType":"module","externalDependencies":[]}