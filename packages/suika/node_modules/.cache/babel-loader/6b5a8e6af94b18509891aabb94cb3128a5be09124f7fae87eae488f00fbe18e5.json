{"ast":null,"code":"import { useEffect, useState } from 'react';\nimport isBrowser from '../utils/isBrowser';\nconst subscribers = new Set();\nlet info;\nlet responsiveConfig = {\n  xs: 0,\n  sm: 576,\n  md: 768,\n  lg: 992,\n  xl: 1200\n};\nfunction handleResize() {\n  const oldInfo = info;\n  calculate();\n  if (oldInfo === info) return;\n  for (const subscriber of subscribers) {\n    subscriber();\n  }\n}\nlet listening = false;\nfunction calculate() {\n  const width = window.innerWidth;\n  const newInfo = {};\n  let shouldUpdate = false;\n  for (const key of Object.keys(responsiveConfig)) {\n    newInfo[key] = width >= responsiveConfig[key];\n    if (newInfo[key] !== info[key]) {\n      shouldUpdate = true;\n    }\n  }\n  if (shouldUpdate) {\n    info = newInfo;\n  }\n}\nexport function configResponsive(config) {\n  responsiveConfig = config;\n  if (info) calculate();\n}\nexport function useResponsive() {\n  if (isBrowser && !listening) {\n    info = {};\n    calculate();\n    window.addEventListener('resize', handleResize);\n    listening = true;\n  }\n  const [state, setState] = useState(info);\n  useEffect(() => {\n    if (!isBrowser) return;\n    // In React 18's StrictMode, useEffect perform twice, resize listener is remove, so handleResize is never perform.\n    // https://github.com/alibaba/hooks/issues/1910\n    if (!listening) {\n      window.addEventListener('resize', handleResize);\n    }\n    const subscriber = () => {\n      setState(info);\n    };\n    subscribers.add(subscriber);\n    return () => {\n      subscribers.delete(subscriber);\n      if (subscribers.size === 0) {\n        window.removeEventListener('resize', handleResize);\n        listening = false;\n      }\n    };\n  }, []);\n  return state;\n}","map":{"version":3,"names":["useEffect","useState","isBrowser","subscribers","Set","info","responsiveConfig","xs","sm","md","lg","xl","handleResize","oldInfo","calculate","subscriber","listening","width","window","innerWidth","newInfo","shouldUpdate","key","Object","keys","configResponsive","config","useResponsive","addEventListener","state","setState","add","delete","size","removeEventListener"],"sources":["/Users/yangdan/zf-workspace/react/suika/node_modules/.pnpm/registry.npmmirror.com+ahooks@3.7.4_react@18.2.0/node_modules/ahooks/es/useResponsive/index.js"],"sourcesContent":["import { useEffect, useState } from 'react';\nimport isBrowser from '../utils/isBrowser';\nconst subscribers = new Set();\nlet info;\nlet responsiveConfig = {\n  xs: 0,\n  sm: 576,\n  md: 768,\n  lg: 992,\n  xl: 1200\n};\nfunction handleResize() {\n  const oldInfo = info;\n  calculate();\n  if (oldInfo === info) return;\n  for (const subscriber of subscribers) {\n    subscriber();\n  }\n}\nlet listening = false;\nfunction calculate() {\n  const width = window.innerWidth;\n  const newInfo = {};\n  let shouldUpdate = false;\n  for (const key of Object.keys(responsiveConfig)) {\n    newInfo[key] = width >= responsiveConfig[key];\n    if (newInfo[key] !== info[key]) {\n      shouldUpdate = true;\n    }\n  }\n  if (shouldUpdate) {\n    info = newInfo;\n  }\n}\nexport function configResponsive(config) {\n  responsiveConfig = config;\n  if (info) calculate();\n}\nexport function useResponsive() {\n  if (isBrowser && !listening) {\n    info = {};\n    calculate();\n    window.addEventListener('resize', handleResize);\n    listening = true;\n  }\n  const [state, setState] = useState(info);\n  useEffect(() => {\n    if (!isBrowser) return;\n    // In React 18's StrictMode, useEffect perform twice, resize listener is remove, so handleResize is never perform.\n    // https://github.com/alibaba/hooks/issues/1910\n    if (!listening) {\n      window.addEventListener('resize', handleResize);\n    }\n    const subscriber = () => {\n      setState(info);\n    };\n    subscribers.add(subscriber);\n    return () => {\n      subscribers.delete(subscriber);\n      if (subscribers.size === 0) {\n        window.removeEventListener('resize', handleResize);\n        listening = false;\n      }\n    };\n  }, []);\n  return state;\n}"],"mappings":"AAAA,SAASA,SAAS,EAAEC,QAAQ,QAAQ,OAAO;AAC3C,OAAOC,SAAS,MAAM,oBAAoB;AAC1C,MAAMC,WAAW,GAAG,IAAIC,GAAG,CAAC,CAAC;AAC7B,IAAIC,IAAI;AACR,IAAIC,gBAAgB,GAAG;EACrBC,EAAE,EAAE,CAAC;EACLC,EAAE,EAAE,GAAG;EACPC,EAAE,EAAE,GAAG;EACPC,EAAE,EAAE,GAAG;EACPC,EAAE,EAAE;AACN,CAAC;AACD,SAASC,YAAYA,CAAA,EAAG;EACtB,MAAMC,OAAO,GAAGR,IAAI;EACpBS,SAAS,CAAC,CAAC;EACX,IAAID,OAAO,KAAKR,IAAI,EAAE;EACtB,KAAK,MAAMU,UAAU,IAAIZ,WAAW,EAAE;IACpCY,UAAU,CAAC,CAAC;EACd;AACF;AACA,IAAIC,SAAS,GAAG,KAAK;AACrB,SAASF,SAASA,CAAA,EAAG;EACnB,MAAMG,KAAK,GAAGC,MAAM,CAACC,UAAU;EAC/B,MAAMC,OAAO,GAAG,CAAC,CAAC;EAClB,IAAIC,YAAY,GAAG,KAAK;EACxB,KAAK,MAAMC,GAAG,IAAIC,MAAM,CAACC,IAAI,CAAClB,gBAAgB,CAAC,EAAE;IAC/Cc,OAAO,CAACE,GAAG,CAAC,GAAGL,KAAK,IAAIX,gBAAgB,CAACgB,GAAG,CAAC;IAC7C,IAAIF,OAAO,CAACE,GAAG,CAAC,KAAKjB,IAAI,CAACiB,GAAG,CAAC,EAAE;MAC9BD,YAAY,GAAG,IAAI;IACrB;EACF;EACA,IAAIA,YAAY,EAAE;IAChBhB,IAAI,GAAGe,OAAO;EAChB;AACF;AACA,OAAO,SAASK,gBAAgBA,CAACC,MAAM,EAAE;EACvCpB,gBAAgB,GAAGoB,MAAM;EACzB,IAAIrB,IAAI,EAAES,SAAS,CAAC,CAAC;AACvB;AACA,OAAO,SAASa,aAAaA,CAAA,EAAG;EAC9B,IAAIzB,SAAS,IAAI,CAACc,SAAS,EAAE;IAC3BX,IAAI,GAAG,CAAC,CAAC;IACTS,SAAS,CAAC,CAAC;IACXI,MAAM,CAACU,gBAAgB,CAAC,QAAQ,EAAEhB,YAAY,CAAC;IAC/CI,SAAS,GAAG,IAAI;EAClB;EACA,MAAM,CAACa,KAAK,EAAEC,QAAQ,CAAC,GAAG7B,QAAQ,CAACI,IAAI,CAAC;EACxCL,SAAS,CAAC,MAAM;IACd,IAAI,CAACE,SAAS,EAAE;IAChB;IACA;IACA,IAAI,CAACc,SAAS,EAAE;MACdE,MAAM,CAACU,gBAAgB,CAAC,QAAQ,EAAEhB,YAAY,CAAC;IACjD;IACA,MAAMG,UAAU,GAAGA,CAAA,KAAM;MACvBe,QAAQ,CAACzB,IAAI,CAAC;IAChB,CAAC;IACDF,WAAW,CAAC4B,GAAG,CAAChB,UAAU,CAAC;IAC3B,OAAO,MAAM;MACXZ,WAAW,CAAC6B,MAAM,CAACjB,UAAU,CAAC;MAC9B,IAAIZ,WAAW,CAAC8B,IAAI,KAAK,CAAC,EAAE;QAC1Bf,MAAM,CAACgB,mBAAmB,CAAC,QAAQ,EAAEtB,YAAY,CAAC;QAClDI,SAAS,GAAG,KAAK;MACnB;IACF,CAAC;EACH,CAAC,EAAE,EAAE,CAAC;EACN,OAAOa,KAAK;AACd"},"metadata":{},"sourceType":"module","externalDependencies":[]}