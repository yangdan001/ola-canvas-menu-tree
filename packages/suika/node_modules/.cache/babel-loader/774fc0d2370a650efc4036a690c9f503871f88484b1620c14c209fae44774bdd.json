{"ast":null,"code":"/**\n * 创建矩形\n */\nexport class SetElementsAttrs {\n  constructor(desc, elements, attrs, prevAttrs) {\n    this.desc = desc;\n    this.elements = elements;\n    this.attrs = attrs;\n    this.prevAttrs = prevAttrs;\n    if (elements.length !== prevAttrs.length) {\n      throw new Error('elements 和 preAttrs 数量不匹配');\n    }\n  }\n  redo() {\n    const {\n      elements,\n      attrs\n    } = this;\n    for (let i = 0, len = this.elements.length; i < len; i++) {\n      if (Array.isArray(attrs)) {\n        elements[i].setAttrs(attrs[i]);\n      } else {\n        elements[i].setAttrs(attrs);\n      }\n    }\n  }\n  undo() {\n    const {\n      elements,\n      prevAttrs\n    } = this;\n    for (let i = 0, len = this.elements.length; i < len; i++) {\n      elements[i].setAttrs(prevAttrs[i]);\n    }\n  }\n}\nSetElementsAttrs.type = 'SetElementsAttrs';","map":{"version":3,"names":["SetElementsAttrs","constructor","desc","elements","attrs","prevAttrs","length","Error","redo","i","len","Array","isArray","setAttrs","undo","type"],"sources":["/Users/yangdan/zf-workspace/react/suika/packages/suika/src/editor/commands/set_elements_attrs.ts"],"sourcesContent":["import { Graph } from '../scene/graph';\nimport { ITexture } from '../texture';\nimport { ICommand } from './type';\n\nexport type ISetElementsAttrsType = Partial<{\n  x: number;\n  y: number;\n  width: number;\n  height: number;\n  rotation: number;\n  fill: ITexture[];\n  stroke: ITexture[];\n  strokeWidth: number;\n}>;\n\n/**\n * 创建矩形\n */\nexport class SetElementsAttrs implements ICommand {\n  static readonly type = 'SetElementsAttrs';\n  constructor(\n    public desc: string,\n    private elements: Graph[],\n    private attrs: ISetElementsAttrsType | ISetElementsAttrsType[],\n    private prevAttrs: ISetElementsAttrsType[],\n  ) {\n    if (elements.length !== prevAttrs.length) {\n      throw new Error('elements 和 preAttrs 数量不匹配');\n    }\n  }\n  redo() {\n    const { elements, attrs } = this;\n    for (let i = 0, len = this.elements.length; i < len; i++) {\n      if (Array.isArray(attrs)) {\n        elements[i].setAttrs(attrs[i]);\n      } else {\n        elements[i].setAttrs(attrs);\n      }\n    }\n  }\n  undo() {\n    const { elements, prevAttrs } = this;\n    for (let i = 0, len = this.elements.length; i < len; i++) {\n      elements[i].setAttrs(prevAttrs[i]);\n    }\n  }\n}\n"],"mappings":"AAeA;AACA;AACA;AACA,OAAO,MAAMA,gBAAgB,CAAqB;EAEhDC,WAAWA,CACFC,IAAY,EACXC,QAAiB,EACjBC,KAAsD,EACtDC,SAAkC,EAC1C;IAAA,KAJOH,IAAY,GAAZA,IAAY;IAAA,KACXC,QAAiB,GAAjBA,QAAiB;IAAA,KACjBC,KAAsD,GAAtDA,KAAsD;IAAA,KACtDC,SAAkC,GAAlCA,SAAkC;IAE1C,IAAIF,QAAQ,CAACG,MAAM,KAAKD,SAAS,CAACC,MAAM,EAAE;MACxC,MAAM,IAAIC,KAAK,CAAC,2BAA2B,CAAC;IAC9C;EACF;EACAC,IAAIA,CAAA,EAAG;IACL,MAAM;MAAEL,QAAQ;MAAEC;IAAM,CAAC,GAAG,IAAI;IAChC,KAAK,IAAIK,CAAC,GAAG,CAAC,EAAEC,GAAG,GAAG,IAAI,CAACP,QAAQ,CAACG,MAAM,EAAEG,CAAC,GAAGC,GAAG,EAAED,CAAC,EAAE,EAAE;MACxD,IAAIE,KAAK,CAACC,OAAO,CAACR,KAAK,CAAC,EAAE;QACxBD,QAAQ,CAACM,CAAC,CAAC,CAACI,QAAQ,CAACT,KAAK,CAACK,CAAC,CAAC,CAAC;MAChC,CAAC,MAAM;QACLN,QAAQ,CAACM,CAAC,CAAC,CAACI,QAAQ,CAACT,KAAK,CAAC;MAC7B;IACF;EACF;EACAU,IAAIA,CAAA,EAAG;IACL,MAAM;MAAEX,QAAQ;MAAEE;IAAU,CAAC,GAAG,IAAI;IACpC,KAAK,IAAII,CAAC,GAAG,CAAC,EAAEC,GAAG,GAAG,IAAI,CAACP,QAAQ,CAACG,MAAM,EAAEG,CAAC,GAAGC,GAAG,EAAED,CAAC,EAAE,EAAE;MACxDN,QAAQ,CAACM,CAAC,CAAC,CAACI,QAAQ,CAACR,SAAS,CAACI,CAAC,CAAC,CAAC;IACpC;EACF;AACF;AA5BaT,gBAAgB,CACXe,IAAI,GAAG,kBAAkB"},"metadata":{},"sourceType":"module","externalDependencies":[]}