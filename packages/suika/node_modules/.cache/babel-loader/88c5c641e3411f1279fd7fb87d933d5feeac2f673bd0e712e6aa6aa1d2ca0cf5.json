{"ast":null,"code":"var _jsxFileName = \"/Users/yangdan/zf-workspace/react/suika/packages/suika/src/components/LocaleSelector/LocaleSelector.tsx\",\n  _s = $RefreshSig$();\nimport { useState } from 'react';\nimport './LocaleSelector.scss';\nimport { autoUpdate, offset, useClick, useFloating, useInteractions } from '@floating-ui/react';\nimport classNames from 'classnames';\nimport { useClickAway } from 'ahooks';\nimport { appEventEmitter } from '../../events';\nimport { I18nOutlined } from '@suika/icons';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport const LocaleSelector = () => {\n  _s();\n  const [isOpen, setIsOpen] = useState(false);\n  const {\n    x,\n    y,\n    strategy,\n    refs,\n    context\n  } = useFloating({\n    open: isOpen,\n    onOpenChange: setIsOpen,\n    placement: 'bottom-end',\n    middleware: [offset(12)],\n    whileElementsMounted: autoUpdate\n  });\n  const click = useClick(context);\n  const {\n    getReferenceProps,\n    getFloatingProps\n  } = useInteractions([click]);\n  useClickAway(() => {\n    setIsOpen(false);\n  }, [refs.domReference, refs.floating], 'mousedown');\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      ref: refs.setReference,\n      ...getReferenceProps(),\n      className: classNames('locale-selector', {\n        active: isOpen\n      }),\n      children: /*#__PURE__*/_jsxDEV(I18nOutlined, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 42,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 37,\n      columnNumber: 7\n    }, this), isOpen && /*#__PURE__*/_jsxDEV(\"div\", {\n      ref: refs.setFloating,\n      className: \"locale-selector-popover\",\n      style: {\n        position: strategy,\n        top: y !== null && y !== void 0 ? y : 0,\n        left: x !== null && x !== void 0 ? x : 0,\n        zIndex: 60\n      },\n      ...getFloatingProps(),\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"locale-selector-popover-item\",\n        onClick: () => {\n          const en = 'en';\n          localStorage.setItem('suika-locale', en);\n          appEventEmitter.emit('localeChange', en);\n          setIsOpen(false);\n        },\n        children: \"English\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 56,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"locale-selector-popover-item\",\n        onClick: () => {\n          const zh = 'zh';\n          localStorage.setItem('suika-locale', zh);\n          appEventEmitter.emit('localeChange', zh);\n          setIsOpen(false);\n        },\n        children: \"\\u7B80\\u4F53\\u4E2D\\u6587\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 45,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true);\n};\n_s(LocaleSelector, \"RdVcbfSS7vqNNJ0s4Dk9NMBbgu8=\", false, function () {\n  return [useFloating, useClick, useInteractions, useClickAway];\n});\n_c = LocaleSelector;\nvar _c;\n$RefreshReg$(_c, \"LocaleSelector\");","map":{"version":3,"names":["useState","autoUpdate","offset","useClick","useFloating","useInteractions","classNames","useClickAway","appEventEmitter","I18nOutlined","jsxDEV","_jsxDEV","Fragment","_Fragment","LocaleSelector","_s","isOpen","setIsOpen","x","y","strategy","refs","context","open","onOpenChange","placement","middleware","whileElementsMounted","click","getReferenceProps","getFloatingProps","domReference","floating","children","ref","setReference","className","active","fileName","_jsxFileName","lineNumber","columnNumber","setFloating","style","position","top","left","zIndex","onClick","en","localStorage","setItem","emit","zh","_c","$RefreshReg$"],"sources":["/Users/yangdan/zf-workspace/react/suika/packages/suika/src/components/LocaleSelector/LocaleSelector.tsx"],"sourcesContent":["import { FC, useState } from 'react';\nimport './LocaleSelector.scss';\nimport {\n  autoUpdate,\n  offset,\n  useClick,\n  useFloating,\n  useInteractions,\n} from '@floating-ui/react';\nimport classNames from 'classnames';\nimport { useClickAway } from 'ahooks';\nimport { appEventEmitter } from '../../events';\nimport { I18nOutlined } from '@suika/icons';\n\nexport const LocaleSelector: FC = () => {\n  const [isOpen, setIsOpen] = useState(false);\n  const { x, y, strategy, refs, context } = useFloating({\n    open: isOpen,\n    onOpenChange: setIsOpen,\n    placement: 'bottom-end',\n    middleware: [offset(12)],\n    whileElementsMounted: autoUpdate,\n  });\n  const click = useClick(context);\n  const { getReferenceProps, getFloatingProps } = useInteractions([click]);\n\n  useClickAway(\n    () => {\n      setIsOpen(false);\n    },\n    [refs.domReference, refs.floating],\n    'mousedown',\n  );\n\n  return (\n    <>\n      <div\n        ref={refs.setReference}\n        {...getReferenceProps()}\n        className={classNames('locale-selector', { active: isOpen })}\n      >\n        <I18nOutlined />\n      </div>\n      {isOpen && (\n        <div\n          ref={refs.setFloating}\n          className=\"locale-selector-popover\"\n          style={{\n            position: strategy,\n            top: y ?? 0,\n            left: x ?? 0,\n            zIndex: 60,\n          }}\n          {...getFloatingProps()}\n        >\n          <div\n            className=\"locale-selector-popover-item\"\n            onClick={() => {\n              const en = 'en';\n              localStorage.setItem('suika-locale', en);\n              appEventEmitter.emit('localeChange', en);\n              setIsOpen(false);\n            }}\n          >\n            English\n          </div>\n          <div\n            className=\"locale-selector-popover-item\"\n            onClick={() => {\n              const zh = 'zh';\n              localStorage.setItem('suika-locale', zh);\n              appEventEmitter.emit('localeChange', zh);\n              setIsOpen(false);\n            }}\n          >\n            简体中文\n          </div>\n        </div>\n      )}\n    </>\n  );\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}