{"ast":null,"code":"import isBrowser from '../../../utils/isBrowser';\nimport isDocumentVisible from './isDocumentVisible';\nconst listeners = [];\nfunction subscribe(listener) {\n  listeners.push(listener);\n  return function unsubscribe() {\n    const index = listeners.indexOf(listener);\n    listeners.splice(index, 1);\n  };\n}\nif (isBrowser) {\n  const revalidate = () => {\n    if (!isDocumentVisible()) return;\n    for (let i = 0; i < listeners.length; i++) {\n      const listener = listeners[i];\n      listener();\n    }\n  };\n  window.addEventListener('visibilitychange', revalidate, false);\n}\nexport default subscribe;","map":{"version":3,"names":["isBrowser","isDocumentVisible","listeners","subscribe","listener","push","unsubscribe","index","indexOf","splice","revalidate","i","length","window","addEventListener"],"sources":["/Users/yangdan/zf-workspace/react/suika/node_modules/.pnpm/registry.npmmirror.com+ahooks@3.7.4_react@18.2.0/node_modules/ahooks/es/useRequest/src/utils/subscribeReVisible.js"],"sourcesContent":["import isBrowser from '../../../utils/isBrowser';\nimport isDocumentVisible from './isDocumentVisible';\nconst listeners = [];\nfunction subscribe(listener) {\n  listeners.push(listener);\n  return function unsubscribe() {\n    const index = listeners.indexOf(listener);\n    listeners.splice(index, 1);\n  };\n}\nif (isBrowser) {\n  const revalidate = () => {\n    if (!isDocumentVisible()) return;\n    for (let i = 0; i < listeners.length; i++) {\n      const listener = listeners[i];\n      listener();\n    }\n  };\n  window.addEventListener('visibilitychange', revalidate, false);\n}\nexport default subscribe;"],"mappings":"AAAA,OAAOA,SAAS,MAAM,0BAA0B;AAChD,OAAOC,iBAAiB,MAAM,qBAAqB;AACnD,MAAMC,SAAS,GAAG,EAAE;AACpB,SAASC,SAASA,CAACC,QAAQ,EAAE;EAC3BF,SAAS,CAACG,IAAI,CAACD,QAAQ,CAAC;EACxB,OAAO,SAASE,WAAWA,CAAA,EAAG;IAC5B,MAAMC,KAAK,GAAGL,SAAS,CAACM,OAAO,CAACJ,QAAQ,CAAC;IACzCF,SAAS,CAACO,MAAM,CAACF,KAAK,EAAE,CAAC,CAAC;EAC5B,CAAC;AACH;AACA,IAAIP,SAAS,EAAE;EACb,MAAMU,UAAU,GAAGA,CAAA,KAAM;IACvB,IAAI,CAACT,iBAAiB,CAAC,CAAC,EAAE;IAC1B,KAAK,IAAIU,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGT,SAAS,CAACU,MAAM,EAAED,CAAC,EAAE,EAAE;MACzC,MAAMP,QAAQ,GAAGF,SAAS,CAACS,CAAC,CAAC;MAC7BP,QAAQ,CAAC,CAAC;IACZ;EACF,CAAC;EACDS,MAAM,CAACC,gBAAgB,CAAC,kBAAkB,EAAEJ,UAAU,EAAE,KAAK,CAAC;AAChE;AACA,eAAeP,SAAS"},"metadata":{},"sourceType":"module","externalDependencies":[]}