{"ast":null,"code":"/* eslint-disable no-empty */\nimport { useState } from 'react';\nimport useMemoizedFn from '../useMemoizedFn';\nimport useUpdateEffect from '../useUpdateEffect';\nimport { isFunction, isUndef } from '../utils';\nexport function createUseStorageState(getStorage) {\n  function useStorageState(key, options) {\n    let storage;\n    // https://github.com/alibaba/hooks/issues/800\n    try {\n      storage = getStorage();\n    } catch (err) {\n      console.error(err);\n    }\n    const serializer = value => {\n      if (options === null || options === void 0 ? void 0 : options.serializer) {\n        return options === null || options === void 0 ? void 0 : options.serializer(value);\n      }\n      return JSON.stringify(value);\n    };\n    const deserializer = value => {\n      if (options === null || options === void 0 ? void 0 : options.deserializer) {\n        return options === null || options === void 0 ? void 0 : options.deserializer(value);\n      }\n      return JSON.parse(value);\n    };\n    function getStoredValue() {\n      try {\n        const raw = storage === null || storage === void 0 ? void 0 : storage.getItem(key);\n        if (raw) {\n          return deserializer(raw);\n        }\n      } catch (e) {\n        console.error(e);\n      }\n      if (isFunction(options === null || options === void 0 ? void 0 : options.defaultValue)) {\n        return options === null || options === void 0 ? void 0 : options.defaultValue();\n      }\n      return options === null || options === void 0 ? void 0 : options.defaultValue;\n    }\n    const [state, setState] = useState(() => getStoredValue());\n    useUpdateEffect(() => {\n      setState(getStoredValue());\n    }, [key]);\n    const updateState = value => {\n      const currentState = isFunction(value) ? value(state) : value;\n      setState(currentState);\n      if (isUndef(currentState)) {\n        storage === null || storage === void 0 ? void 0 : storage.removeItem(key);\n      } else {\n        try {\n          storage === null || storage === void 0 ? void 0 : storage.setItem(key, serializer(currentState));\n        } catch (e) {\n          console.error(e);\n        }\n      }\n    };\n    return [state, useMemoizedFn(updateState)];\n  }\n  return useStorageState;\n}","map":{"version":3,"names":["useState","useMemoizedFn","useUpdateEffect","isFunction","isUndef","createUseStorageState","getStorage","useStorageState","key","options","storage","err","console","error","serializer","value","JSON","stringify","deserializer","parse","getStoredValue","raw","getItem","e","defaultValue","state","setState","updateState","currentState","removeItem","setItem"],"sources":["/Users/yangdan/zf-workspace/react/suika/node_modules/.pnpm/registry.npmmirror.com+ahooks@3.7.4_react@18.2.0/node_modules/ahooks/es/createUseStorageState/index.js"],"sourcesContent":["/* eslint-disable no-empty */\nimport { useState } from 'react';\nimport useMemoizedFn from '../useMemoizedFn';\nimport useUpdateEffect from '../useUpdateEffect';\nimport { isFunction, isUndef } from '../utils';\nexport function createUseStorageState(getStorage) {\n  function useStorageState(key, options) {\n    let storage;\n    // https://github.com/alibaba/hooks/issues/800\n    try {\n      storage = getStorage();\n    } catch (err) {\n      console.error(err);\n    }\n    const serializer = value => {\n      if (options === null || options === void 0 ? void 0 : options.serializer) {\n        return options === null || options === void 0 ? void 0 : options.serializer(value);\n      }\n      return JSON.stringify(value);\n    };\n    const deserializer = value => {\n      if (options === null || options === void 0 ? void 0 : options.deserializer) {\n        return options === null || options === void 0 ? void 0 : options.deserializer(value);\n      }\n      return JSON.parse(value);\n    };\n    function getStoredValue() {\n      try {\n        const raw = storage === null || storage === void 0 ? void 0 : storage.getItem(key);\n        if (raw) {\n          return deserializer(raw);\n        }\n      } catch (e) {\n        console.error(e);\n      }\n      if (isFunction(options === null || options === void 0 ? void 0 : options.defaultValue)) {\n        return options === null || options === void 0 ? void 0 : options.defaultValue();\n      }\n      return options === null || options === void 0 ? void 0 : options.defaultValue;\n    }\n    const [state, setState] = useState(() => getStoredValue());\n    useUpdateEffect(() => {\n      setState(getStoredValue());\n    }, [key]);\n    const updateState = value => {\n      const currentState = isFunction(value) ? value(state) : value;\n      setState(currentState);\n      if (isUndef(currentState)) {\n        storage === null || storage === void 0 ? void 0 : storage.removeItem(key);\n      } else {\n        try {\n          storage === null || storage === void 0 ? void 0 : storage.setItem(key, serializer(currentState));\n        } catch (e) {\n          console.error(e);\n        }\n      }\n    };\n    return [state, useMemoizedFn(updateState)];\n  }\n  return useStorageState;\n}"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}