{"ast":null,"code":"import EventEmitter from '../utils/event_emitter';\nimport { TextureType } from './texture';\nexport class Setting {\n  constructor() {\n    this.eventEmitter = new EventEmitter();\n    this.value = {\n      /***** texture ****/\n      canvasBgColor: '#f4f4f4',\n      firstStroke: {\n        type: TextureType.Solid,\n        attrs: {\n          r: 0,\n          g: 0,\n          b: 0,\n          a: 1\n        }\n      },\n      strokeWidth: 1,\n      firstFill: {\n        type: TextureType.Solid,\n        attrs: {\n          r: 217,\n          g: 217,\n          b: 217,\n          a: 1\n        }\n      },\n      addedTexture: {\n        type: TextureType.Solid,\n        attrs: {\n          r: 0,\n          g: 0,\n          b: 0,\n          a: 0.2\n        }\n      },\n      guideBBoxStroke: '#1592fe',\n      selectionStroke: '#0f8eff',\n      selectionFill: '#0f8eff33',\n      selectionMode: 'intersect',\n      // 点选时，加一个 padding，使得点选更容易\n      selectionHitPadding: 4,\n      /******** transform ********/\n      handleRotationStroke: '#1592fe',\n      handleRotationFill: '#fff',\n      handleStrokeWidth: 2,\n      handleStrokePadding: 4,\n      handleSize: 6,\n      handleRotationLineLength: 15,\n      /********* text ********/\n      defaultFontSize: 12,\n      textFill: [{\n        type: TextureType.Solid,\n        attrs: {\n          r: 0,\n          g: 0,\n          b: 0,\n          a: 1\n        }\n      }],\n      lockRotation: Math.PI / 12,\n      // 旋转时，通过 shift 约束旋转角度为该值的整数倍。\n\n      zoomStep: 0.27,\n      // 缩放比例步长\n      zoomMax: 256,\n      zoomMin: 0.02,\n      drawGraphDefaultWidth: 100,\n      // drawing graph default width if no drag\n      drawGraphDefaultHeight: 100,\n      // default height\n\n      /**** 标尺相关 ****/\n      enableRuler: true,\n      minStepInViewport: 50,\n      // 视口区域下的最小步长\n      rulerBgColor: '#fff',\n      rulerStroke: '#e6e6e6',\n      rulerMarkStroke: '#c1c1c1',\n      rulerWidth: 20,\n      // 宽度\n      rulerMarkSize: 4,\n      // 刻度高度\n\n      /**** 网格相关 ****/\n      enablePixelGrid: true,\n      snapToPixelGrid: true,\n      // 是否吸附到像素网格\n      minPixelGridZoom: 8,\n      // draw pixel grid When zoom reach this value\n      pixelGridLineColor: '#cccccc55',\n      // pixel grid line color\n\n      dragBlockStep: 4,\n      // drag handler will not happen if move distance less this value\n\n      offsetX: 0,\n      // 鼠标坐标位置的修正值\n      offsetY: 0,\n      zoomToFixPadding: 32,\n      // base viewport coord\n\n      moveElementsStep: 1,\n      moveElementsStepFast: 10,\n      moveElementsDelay: 500,\n      // reference line\n      refLineTolerance: 4,\n      refLineStroke: '#f14f30ee',\n      refLineStrokeWidth: 1,\n      refLinePointSize: 5\n    };\n  }\n  set(key, value) {\n    this.value[key] = value;\n    this.eventEmitter.emit('update', this.getAttrs());\n  }\n  get(key) {\n    return this.value[key];\n  }\n  getAttrs() {\n    return {\n      ...this.value\n    };\n  }\n  on(eventName, handler) {\n    this.eventEmitter.on(eventName, handler);\n  }\n  off(eventName, handler) {\n    this.eventEmitter.off(eventName, handler);\n  }\n}","map":{"version":3,"names":["EventEmitter","TextureType","Setting","constructor","eventEmitter","value","canvasBgColor","firstStroke","type","Solid","attrs","r","g","b","a","strokeWidth","firstFill","addedTexture","guideBBoxStroke","selectionStroke","selectionFill","selectionMode","selectionHitPadding","handleRotationStroke","handleRotationFill","handleStrokeWidth","handleStrokePadding","handleSize","handleRotationLineLength","defaultFontSize","textFill","lockRotation","Math","PI","zoomStep","zoomMax","zoomMin","drawGraphDefaultWidth","drawGraphDefaultHeight","enableRuler","minStepInViewport","rulerBgColor","rulerStroke","rulerMarkStroke","rulerWidth","rulerMarkSize","enablePixelGrid","snapToPixelGrid","minPixelGridZoom","pixelGridLineColor","dragBlockStep","offsetX","offsetY","zoomToFixPadding","moveElementsStep","moveElementsStepFast","moveElementsDelay","refLineTolerance","refLineStroke","refLineStrokeWidth","refLinePointSize","set","key","emit","getAttrs","get","on","eventName","handler","off"],"sources":["/Users/yangdan/zf-workspace/react/suika/packages/suika/src/editor/setting.ts"],"sourcesContent":["import EventEmitter from '../utils/event_emitter';\nimport { ITexture, TextureType } from './texture';\n\ninterface Events {\n  update(attrs: SettingValue): void;\n}\n\nexport class Setting {\n  private eventEmitter = new EventEmitter<Events>();\n  private value = {\n    /***** texture ****/\n    canvasBgColor: '#f4f4f4',\n    firstStroke: {\n      type: TextureType.Solid,\n      attrs: { r: 0, g: 0, b: 0, a: 1 },\n    } as ITexture,\n    strokeWidth: 1,\n\n    firstFill: {\n      type: TextureType.Solid,\n      attrs: { r: 217, g: 217, b: 217, a: 1 },\n    } as ITexture,\n\n    addedTexture: {\n      type: TextureType.Solid,\n      attrs: { r: 0, g: 0, b: 0, a: 0.2 },\n    } as ITexture,\n\n    guideBBoxStroke: '#1592fe',\n    selectionStroke: '#0f8eff',\n    selectionFill: '#0f8eff33',\n    selectionMode: 'intersect' as 'intersect' | 'contain',\n\n    // 点选时，加一个 padding，使得点选更容易\n    selectionHitPadding: 4,\n\n    /******** transform ********/\n    handleRotationStroke: '#1592fe',\n    handleRotationFill: '#fff',\n    handleStrokeWidth: 2,\n    handleStrokePadding: 4,\n    handleSize: 6,\n    handleRotationLineLength: 15,\n\n    /********* text ********/\n    defaultFontSize: 12,\n    textFill: [\n      {\n        type: TextureType.Solid,\n        attrs: { r: 0, g: 0, b: 0, a: 1 },\n      },\n    ] as ITexture[],\n\n    lockRotation: Math.PI / 12, // 旋转时，通过 shift 约束旋转角度为该值的整数倍。\n\n    zoomStep: 0.27, // 缩放比例步长\n    zoomMax: 256,\n    zoomMin: 0.02,\n\n    drawGraphDefaultWidth: 100, // drawing graph default width if no drag\n    drawGraphDefaultHeight: 100, // default height\n\n    /**** 标尺相关 ****/\n    enableRuler: true,\n    minStepInViewport: 50, // 视口区域下的最小步长\n    rulerBgColor: '#fff',\n    rulerStroke: '#e6e6e6',\n    rulerMarkStroke: '#c1c1c1',\n    rulerWidth: 20, // 宽度\n    rulerMarkSize: 4, // 刻度高度\n\n    /**** 网格相关 ****/\n    enablePixelGrid: true,\n    snapToPixelGrid: true, // 是否吸附到像素网格\n    minPixelGridZoom: 8, // draw pixel grid When zoom reach this value\n    pixelGridLineColor: '#cccccc55', // pixel grid line color\n\n    dragBlockStep: 4, // drag handler will not happen if move distance less this value\n\n    offsetX: 0, // 鼠标坐标位置的修正值\n    offsetY: 0,\n\n    zoomToFixPadding: 32, // base viewport coord\n\n    moveElementsStep: 1,\n    moveElementsStepFast: 10,\n    moveElementsDelay: 500,\n\n    // reference line\n    refLineTolerance: 4,\n    refLineStroke: '#f14f30ee',\n    refLineStrokeWidth: 1,\n    refLinePointSize: 5,\n  };\n\n  set<K extends keyof Setting['value']>(key: K, value: Setting['value'][K]) {\n    this.value[key] = value;\n    this.eventEmitter.emit('update', this.getAttrs());\n  }\n  get<K extends keyof Setting['value']>(key: K) {\n    return this.value[key];\n  }\n  getAttrs() {\n    return { ...this.value };\n  }\n\n  on(eventName: 'update', handler: (value: Setting['value']) => void) {\n    this.eventEmitter.on(eventName, handler);\n  }\n  off(eventName: 'update', handler: (value: Setting['value']) => void) {\n    this.eventEmitter.off(eventName, handler);\n  }\n}\n\nexport type SettingValue = Setting['value'];\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}