{"ast":null,"code":"var _jsxFileName = \"/Users/yangdan/zf-workspace/react/suika/packages/suika/src/components/LeftTreeMenu/index.js\",\n  _s = $RefreshSig$();\nimport React, { useState } from 'react';\nimport { Tree } from 'antd';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst x = 3;\nconst y = 2;\nconst z = 1;\nconst defaultData = [{\n  \"title\": \"标题-1\",\n  \"key\": \"标题-1\",\n  \"children\": [{\n    \"title\": \"标题-1-0\",\n    \"key\": \"标题-1-0\",\n    \"children\": [{\n      \"title\": \"标题-1-0-0\",\n      \"key\": \"标题-1-0-0\"\n    }, {\n      \"title\": \"标题-1-0-1\",\n      \"key\": \"标题-1-0-1\"\n    }, {\n      \"title\": \"标题-1-0-2\",\n      \"key\": \"标题-1-0-2\"\n    }]\n  }, {\n    \"title\": \"标题-1-1\",\n    \"key\": \"标题-1-1\",\n    \"children\": [{\n      \"title\": \"标题-1-1-0\",\n      \"key\": \"标题-1-1-0\"\n    }, {\n      \"title\": \"标题-1-1-1\",\n      \"key\": \"标题-1-1-1\"\n    }, {\n      \"title\": \"标题-1-1-2\",\n      \"key\": \"标题-1-1-2\"\n    }]\n  }, {\n    \"title\": \"标题-1-2\",\n    \"key\": \"标题-1-2\"\n  }]\n}, {\n  \"title\": \"标题-2\",\n  \"key\": \"标题-2\",\n  \"children\": [{\n    \"title\": \"标题-2-0\",\n    \"key\": \"标题-2-0\",\n    \"children\": [{\n      \"title\": \"标题-2-0-0\",\n      \"key\": \"标题-2-0-0\"\n    }, {\n      \"title\": \"标题-2-0-1\",\n      \"key\": \"标题-2-0-1\"\n    }, {\n      \"title\": \"标题-2-0-2\",\n      \"key\": \"标题-2-0-2\"\n    }]\n  }, {\n    \"title\": \"标题-2-1\",\n    \"key\": \"标题-2-1\",\n    \"children\": [{\n      \"title\": \"标题-2-1-0\",\n      \"key\": \"标题-2-1-0\"\n    }, {\n      \"title\": \"标题-2-1-1\",\n      \"key\": \"标题-2-1-1\"\n    }, {\n      \"title\": \"标题-2-1-2\",\n      \"key\": \"标题-2-1-2\"\n    }]\n  }, {\n    \"title\": \"标题-2-2\",\n    \"key\": \"标题-2-2\"\n  }]\n}, {\n  \"title\": \"标题-3\",\n  \"key\": \"标题-3\"\n}, {\n  \"title\": \"标题-4\",\n  \"key\": \"标题-4\"\n}, {\n  \"title\": \"标题-5\",\n  \"key\": \"标题-5\"\n}];\nconst App = () => {\n  _s();\n  const [gData, setGData] = useState(defaultData);\n  const [expandedKeys] = useState(['标题-1-1']);\n  const onDragEnter = info => {\n    // console.log(info);\n    // expandedKeys, set it when controlled is needed\n    // setExpandedKeys(info.expandedKeys)\n  };\n  // 拖拽逻辑\n  const onDrop = info => {\n    // console.log(info);\n    const dropKey = info.node.key;\n    const dragKey = info.dragNode.key;\n    const dropPos = info.node.pos.split('-');\n    const dropPosition = info.dropPosition - Number(dropPos[dropPos.length - 1]);\n    const loop = (data, key, callback) => {\n      for (let i = 0; i < data.length; i++) {\n        if (data[i].key === key) {\n          return callback(data[i], i, data);\n        }\n        if (data[i].children) {\n          loop(data[i].children, key, callback);\n        }\n      }\n    };\n    const data = [...gData];\n\n    // Find dragObject\n    let dragObj;\n    loop(data, dragKey, (item, index, arr) => {\n      arr.splice(index, 1);\n      dragObj = item;\n    });\n    if (!info.dropToGap) {\n      // Drop on the content\n      loop(data, dropKey, item => {\n        item.children = item.children || [];\n        // where to insert. New item was inserted to the start of the array in this example, but can be anywhere\n        item.children.unshift(dragObj);\n      });\n    } else if ((info.node.props.children || []).length > 0 &&\n    // Has children\n    info.node.props.expanded &&\n    // Is expanded\n    dropPosition === 1 // On the bottom gap\n    ) {\n      loop(data, dropKey, item => {\n        item.children = item.children || [];\n        // where to insert. New item was inserted to the start of the array in this example, but can be anywhere\n        item.children.unshift(dragObj);\n        // in previous version, we use item.children.push(dragObj) to insert the\n        // item to the tail of the children\n      });\n    } else {\n      let ar = [];\n      let i;\n      loop(data, dropKey, (_item, index, arr) => {\n        ar = arr;\n        i = index;\n      });\n      if (dropPosition === -1) {\n        ar.splice(i, 0, dragObj);\n      } else {\n        ar.splice(i + 1, 0, dragObj);\n      }\n    }\n    setGData(data);\n  };\n  /**\n   * 1、defaultExpandAll  ： 默认展开所有父节点\n   * 2、expandedKeys ：默认选中的值，\n   * */\n  // eslint-disable-next-line\n  return /*#__PURE__*/_jsxDEV(Tree, {\n    className: \"draggable-tree\",\n    style: {\n      width: 240\n    },\n    defaultExpandAll: true,\n    defaultSelectedKeys: expandedKeys,\n    draggable: true,\n    blockNode: true,\n    onDragEnter: onDragEnter,\n    onDrop: onDrop,\n    onSelect: onSelectTree,\n    treeData: gData\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 193,\n    columnNumber: 5\n  }, this);\n};\n_s(App, \"oZXsNIVyuhrCeXLWKbiZuAgpHe4=\");\n_c = App;\nexport default App;\nvar _c;\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["React","useState","Tree","jsxDEV","_jsxDEV","x","y","z","defaultData","App","_s","gData","setGData","expandedKeys","onDragEnter","info","onDrop","dropKey","node","key","dragKey","dragNode","dropPos","pos","split","dropPosition","Number","length","loop","data","callback","i","children","dragObj","item","index","arr","splice","dropToGap","unshift","props","expanded","ar","_item","className","style","width","defaultExpandAll","defaultSelectedKeys","draggable","blockNode","onSelect","onSelectTree","treeData","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["/Users/yangdan/zf-workspace/react/suika/packages/suika/src/components/LeftTreeMenu/index.js"],"sourcesContent":["import React, { useState } from 'react';\nimport { Tree } from 'antd';\nconst x = 3;\nconst y = 2;\nconst z = 1;\nconst defaultData = [\n  {\n      \"title\": \"标题-1\",\n      \"key\": \"标题-1\",\n      \"children\": [\n          {\n              \"title\": \"标题-1-0\",\n              \"key\": \"标题-1-0\",\n              \"children\": [\n                  {\n                      \"title\": \"标题-1-0-0\",\n                      \"key\": \"标题-1-0-0\"\n                  },\n                  {\n                      \"title\": \"标题-1-0-1\",\n                      \"key\": \"标题-1-0-1\"\n                  },\n                  {\n                      \"title\": \"标题-1-0-2\",\n                      \"key\": \"标题-1-0-2\"\n                  }\n              ]\n          },\n          {\n              \"title\": \"标题-1-1\",\n              \"key\": \"标题-1-1\",\n              \"children\": [\n                  {\n                      \"title\": \"标题-1-1-0\",\n                      \"key\": \"标题-1-1-0\"\n                  },\n                  {\n                      \"title\": \"标题-1-1-1\",\n                      \"key\": \"标题-1-1-1\"\n                  },\n                  {\n                      \"title\": \"标题-1-1-2\",\n                      \"key\": \"标题-1-1-2\"\n                  }\n              ]\n          },\n          {\n              \"title\": \"标题-1-2\",\n              \"key\": \"标题-1-2\"\n          }\n      ]\n  },\n  {\n      \"title\": \"标题-2\",\n      \"key\": \"标题-2\",\n      \"children\": [\n          {\n              \"title\": \"标题-2-0\",\n              \"key\": \"标题-2-0\",\n              \"children\": [\n                  {\n                      \"title\": \"标题-2-0-0\",\n                      \"key\": \"标题-2-0-0\"\n                  },\n                  {\n                      \"title\": \"标题-2-0-1\",\n                      \"key\": \"标题-2-0-1\"\n                  },\n                  {\n                      \"title\": \"标题-2-0-2\",\n                      \"key\": \"标题-2-0-2\"\n                  }\n              ]\n          },\n          {\n              \"title\": \"标题-2-1\",\n              \"key\": \"标题-2-1\",\n              \"children\": [\n                  {\n                      \"title\": \"标题-2-1-0\",\n                      \"key\": \"标题-2-1-0\"\n                  },\n                  {\n                      \"title\": \"标题-2-1-1\",\n                      \"key\": \"标题-2-1-1\"\n                  },\n                  {\n                      \"title\": \"标题-2-1-2\",\n                      \"key\": \"标题-2-1-2\"\n                  }\n              ]\n          },\n          {\n              \"title\": \"标题-2-2\",\n              \"key\": \"标题-2-2\"\n          }\n      ]\n  },\n  {\n      \"title\": \"标题-3\",\n      \"key\": \"标题-3\"\n  },\n  {\n      \"title\": \"标题-4\",\n      \"key\": \"标题-4\"\n  },\n  {\n      \"title\": \"标题-5\",\n      \"key\": \"标题-5\"\n  }\n]\n\nconst App = () => {\n  const [gData, setGData] = useState(defaultData);\n  const [expandedKeys] = useState(['标题-1-1']);\n\n  const onDragEnter = (info) => {\n    // console.log(info);\n    // expandedKeys, set it when controlled is needed\n    // setExpandedKeys(info.expandedKeys)\n  };\n  // 拖拽逻辑\n  const onDrop = (info) => {\n    // console.log(info);\n    const dropKey = info.node.key;\n    const dragKey = info.dragNode.key;\n    const dropPos = info.node.pos.split('-');\n    const dropPosition = info.dropPosition - Number(dropPos[dropPos.length - 1]);\n\n    const loop = (\n      data,\n      key,\n      callback,\n    ) => {\n      for (let i = 0; i < data.length; i++) {\n        if (data[i].key === key) {\n          return callback(data[i], i, data);\n        }\n        if (data[i].children) {\n          loop(data[i].children, key, callback);\n        }\n      }\n    };\n    const data = [...gData];\n\n    // Find dragObject\n    let dragObj;\n    loop(data, dragKey, (item, index, arr) => {\n      arr.splice(index, 1);\n      dragObj = item;\n    });\n\n    if (!info.dropToGap) {\n      // Drop on the content\n      loop(data, dropKey, (item) => {\n        item.children = item.children || [];\n        // where to insert. New item was inserted to the start of the array in this example, but can be anywhere\n        item.children.unshift(dragObj);\n      });\n    } else if (\n      ((info.node ).props.children || []).length > 0 && // Has children\n      (info.node ).props.expanded && // Is expanded\n      dropPosition === 1 // On the bottom gap\n    ) {\n      loop(data, dropKey, (item) => {\n        item.children = item.children || [];\n        // where to insert. New item was inserted to the start of the array in this example, but can be anywhere\n        item.children.unshift(dragObj);\n        // in previous version, we use item.children.push(dragObj) to insert the\n        // item to the tail of the children\n      });\n    } else {\n      let ar = [];\n      let i;\n      loop(data, dropKey, (_item, index, arr) => {\n        ar = arr;\n        i = index;\n      });\n      if (dropPosition === -1) {\n        ar.splice(i, 0, dragObj);\n      } else {\n        ar.splice(i + 1, 0, dragObj);\n      }\n    }\n    setGData(data);\n  };\n  /**\n   * 1、defaultExpandAll  ： 默认展开所有父节点\n   * 2、expandedKeys ：默认选中的值，\n   * */ \n// eslint-disable-next-line\n  return (\n    <Tree\n      className=\"draggable-tree\"\n      style={{width:240}}\n      defaultExpandAll={true}\n      defaultSelectedKeys={expandedKeys}\n      draggable\n      blockNode\n      onDragEnter={onDragEnter}\n      onDrop={onDrop}\n      onSelect={onSelectTree}\n      treeData={gData} \n      />\n  );\n};\n\nexport default App;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}