{"ast":null,"code":"import { __rest } from \"tslib\";\nimport { useMemo } from 'react';\nimport useMemoizedFn from '../useMemoizedFn';\nimport useRequest from '../useRequest';\nconst usePagination = (service, options = {}) => {\n  var _a;\n  const {\n      defaultPageSize = 10,\n      defaultCurrent = 1\n    } = options,\n    rest = __rest(options, [\"defaultPageSize\", \"defaultCurrent\"]);\n  const result = useRequest(service, Object.assign({\n    defaultParams: [{\n      current: defaultCurrent,\n      pageSize: defaultPageSize\n    }],\n    refreshDepsAction: () => {\n      // eslint-disable-next-line @typescript-eslint/no-use-before-define\n      changeCurrent(1);\n    }\n  }, rest));\n  const {\n    current = 1,\n    pageSize = defaultPageSize\n  } = result.params[0] || {};\n  const total = ((_a = result.data) === null || _a === void 0 ? void 0 : _a.total) || 0;\n  const totalPage = useMemo(() => Math.ceil(total / pageSize), [pageSize, total]);\n  const onChange = (c, p) => {\n    let toCurrent = c <= 0 ? 1 : c;\n    const toPageSize = p <= 0 ? 1 : p;\n    const tempTotalPage = Math.ceil(total / toPageSize);\n    if (toCurrent > tempTotalPage) {\n      toCurrent = Math.max(1, tempTotalPage);\n    }\n    const [oldPaginationParams = {}, ...restParams] = result.params || [];\n    result.run(Object.assign(Object.assign({}, oldPaginationParams), {\n      current: toCurrent,\n      pageSize: toPageSize\n    }), ...restParams);\n  };\n  const changeCurrent = c => {\n    onChange(c, pageSize);\n  };\n  const changePageSize = p => {\n    onChange(current, p);\n  };\n  return Object.assign(Object.assign({}, result), {\n    pagination: {\n      current,\n      pageSize,\n      total,\n      totalPage,\n      onChange: useMemoizedFn(onChange),\n      changeCurrent: useMemoizedFn(changeCurrent),\n      changePageSize: useMemoizedFn(changePageSize)\n    }\n  });\n};\nexport default usePagination;","map":{"version":3,"names":["__rest","useMemo","useMemoizedFn","useRequest","usePagination","service","options","_a","defaultPageSize","defaultCurrent","rest","result","Object","assign","defaultParams","current","pageSize","refreshDepsAction","changeCurrent","params","total","data","totalPage","Math","ceil","onChange","c","p","toCurrent","toPageSize","tempTotalPage","max","oldPaginationParams","restParams","run","changePageSize","pagination"],"sources":["/Users/yangdan/zf-workspace/react/suika/node_modules/.pnpm/registry.npmmirror.com+ahooks@3.7.4_react@18.2.0/node_modules/ahooks/es/usePagination/index.js"],"sourcesContent":["import { __rest } from \"tslib\";\nimport { useMemo } from 'react';\nimport useMemoizedFn from '../useMemoizedFn';\nimport useRequest from '../useRequest';\nconst usePagination = (service, options = {}) => {\n  var _a;\n  const {\n      defaultPageSize = 10,\n      defaultCurrent = 1\n    } = options,\n    rest = __rest(options, [\"defaultPageSize\", \"defaultCurrent\"]);\n  const result = useRequest(service, Object.assign({\n    defaultParams: [{\n      current: defaultCurrent,\n      pageSize: defaultPageSize\n    }],\n    refreshDepsAction: () => {\n      // eslint-disable-next-line @typescript-eslint/no-use-before-define\n      changeCurrent(1);\n    }\n  }, rest));\n  const {\n    current = 1,\n    pageSize = defaultPageSize\n  } = result.params[0] || {};\n  const total = ((_a = result.data) === null || _a === void 0 ? void 0 : _a.total) || 0;\n  const totalPage = useMemo(() => Math.ceil(total / pageSize), [pageSize, total]);\n  const onChange = (c, p) => {\n    let toCurrent = c <= 0 ? 1 : c;\n    const toPageSize = p <= 0 ? 1 : p;\n    const tempTotalPage = Math.ceil(total / toPageSize);\n    if (toCurrent > tempTotalPage) {\n      toCurrent = Math.max(1, tempTotalPage);\n    }\n    const [oldPaginationParams = {}, ...restParams] = result.params || [];\n    result.run(Object.assign(Object.assign({}, oldPaginationParams), {\n      current: toCurrent,\n      pageSize: toPageSize\n    }), ...restParams);\n  };\n  const changeCurrent = c => {\n    onChange(c, pageSize);\n  };\n  const changePageSize = p => {\n    onChange(current, p);\n  };\n  return Object.assign(Object.assign({}, result), {\n    pagination: {\n      current,\n      pageSize,\n      total,\n      totalPage,\n      onChange: useMemoizedFn(onChange),\n      changeCurrent: useMemoizedFn(changeCurrent),\n      changePageSize: useMemoizedFn(changePageSize)\n    }\n  });\n};\nexport default usePagination;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}